!function(e,t){"object"==typeof module&&module.exports?module.exports=function(e){return e.contextMenu=t(e),e.contextMenu}:e.d3.contextMenu=t(e.d3)}(this,function(e){return function(t,n){return e.selectAll(".d3-context-menu").data([1]).enter().append("div").attr("class","d3-context-menu"),e.select("body").on("click.d3-context-menu",function(){e.select(".d3-context-menu").style("display","none")}),function(l,o){var c=this;e.selectAll(".d3-context-menu").html("");var u=e.selectAll(".d3-context-menu").append("ul");if(u.selectAll("li").data("function"==typeof t?t(l):t).enter().append("li").html(function(e){return"string"==typeof e.title?e.title:e.title(l)}).on("click",function(t,n){t.action(c,l,o),e.select(".d3-context-menu").style("display","none")}),!n||n(l,o)!==!1){var i=[0,0];i=e.mouse(this);i[0],i[1];e.select(".d3-context-menu").style("left",e.event.pageX-2+"px").style("top",e.event.pageY-2+"px").style("display","block"),e.event.preventDefault(),e.event.stopPropagation()}}}});
!function(){function e(e){var i=e.__resizeTriggers__,t=i.firstElementChild,r=i.lastElementChild,n=t.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,n.style.width=t.offsetWidth+1+"px",n.style.height=t.offsetHeight+1+"px",t.scrollLeft=t.scrollWidth,t.scrollTop=t.scrollHeight}function i(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height}function t(t){var r=this;e(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=o(function(){i(r)&&(r.__resizeLast__.width=r.offsetWidth,r.__resizeLast__.height=r.offsetHeight,r.__resizeListeners__.forEach(function(e){e.call(r,t)}))})}function r(){if(!s){var e=(v?v:"")+".resize-triggers { "+(w?w:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),i.appendChild(t),s=!0}}var n=document.attachEvent,s=!1;if(!n){var o=function(){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)};return function(i){return e(i)}}(),a=function(){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(i){return e(i)}}(),_=!1,d="animation",l="",c="animationstart",m="Webkit Moz O ms".split(" "),g="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),h="",f=document.createElement("fakeelement");if(void 0!==f.style.animationName&&(_=!0),_===!1)for(var u=0;u<m.length;u++)if(void 0!==f.style[m[u]+"AnimationName"]){h=m[u],d=h+"Animation",l="-"+h.toLowerCase()+"-",c=g[u],_=!0;break}var z="resizeanim",v="@"+l+"keyframes "+z+" { from { opacity: 0; } to { opacity: 0; } } ",w=l+"animation: 1ms "+z+"; "}window.addResizeListener=function(i,s){n?i.attachEvent("onresize",s):(i.__resizeTriggers__||("static"==getComputedStyle(i).position&&(i.style.position="relative"),r(),i.__resizeLast__={},i.__resizeListeners__=[],(i.__resizeTriggers__=document.createElement("div")).className="resize-triggers",i.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',i.appendChild(i.__resizeTriggers__),e(i),i.addEventListener("scroll",t,!0),c&&i.__resizeTriggers__.addEventListener(c,function(t){t.animationName==z&&e(i)})),i.__resizeListeners__.push(s))},window.removeResizeListener=function(e,i){n?e.detachEvent("onresize",i):(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(i),1),e.__resizeListeners__.length||(e.removeEventListener("scroll",t),e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)))}}();
var ea;!function(t){"use strict";function e(t){var e=t.element,n=t.data,a=2,r=35,s=40,o=[d3.time.hour.offset(new Date,-24),d3.time.hour.offset(new Date,0)],i=[d3.time.day.offset(new Date,-5),new Date],c={top:30,right:20,bottom:30,left:100},l=parseInt(e.style("width"),10)-c.left-c.right;l||(l=100);var u=200,m=100,f=(d3.format("%"),d3.time.scale().clamp(!0).domain(o).range([0,l])),d=d3.time.scale().clamp(!0).domain(i).range([0,l]),p=d3.svg.brush().x(d).extent(o).on("brush",function(){if(!p.empty()){var t=p.extent(),e=new Date;t[1]>e&&(t[1]=e),o=t,f.domain(t),I()}}),x=d3.scale.ordinal(),h=d3.svg.axis(),g=d3.svg.axis().scale(f),v=d3.svg.axis().scale(f).ticks(d3.time.hours,8),b=d3.svg.axis().scale(d),w=e.append("svg").style("width",l+c.left+c.right+"px"),T=w.append("g").attr("class","focus").attr("transform","translate("+[c.left,c.top]+")");T.append("g").attr("class","x axis top"),T.append("g").attr("class","x axis bottom").attr("transform","translate(0,"+u+")"),T.append("g").attr("class","y axis").attr("transform","translate("+-1*a+","+a+")");var y=w.append("g").attr("class","context").attr("transform","translate("+[c.left,0]+")");y.append("g").attr("class","x axis context bottom").attr("transform","translate(0,"+u+")"),y.append("g").attr("class","x brush").call(p).selectAll("rect").attr("y",-6).attr("height",m+5);var k=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(t){var e='<strong class="value">'+t.name+"</span><br> <span>"+moment(t.startTime).format("h:mm:ss a")+" &ndash; "+moment(t.endTime).format("h:mm:ss a")+"<br> ("+moment.duration(moment(t.endTime).diff(t.startTime)).format("d[d] h [hrs], m [min], s [sec]")+")</span>";return e});T.call(k);var D=function(t,e){var n=0;return t.endTime?t.startTime&&(n=e(t.endTime)-e(t.startTime)):n=e(new Date)-e(t.startTime),n>0&&1>n&&(n=1),n},A=function(t){var e,n=t;x.domain(n.map(function(t){return t.key})).rangeBands([0,n.length*s]),h.scale(x),T.select(".y.axis").call(h.orient("left")),e=x.rangeExtent()[1],d3.select(T.node().parentNode).style("height",e+c.top+r+m+c.bottom+"px"),w.select(".context").attr("transform",function(){return"translate("+[c.left,e+c.top+r]+")"}),T.select(".x.axis.bottom").attr("transform",function(){return"translate(0,"+(e+2*a)+")"}),y.select(".x.axis.context.bottom").attr("transform",function(){return"translate(0,"+m+")"});var o=T.selectAll(".bar").data(n,function(t){return t.key});o.enter().append("g").attr("class","bar").append("rect").attr("class","background").attr("height",x.rangeBand()).attr("width",l),o.attr("transform",function(t,e){var r=d3.map(n,function(t){return t.key}).keys().indexOf(t.key);return"translate(0,"+(r*s+a)+")"});var i=o.selectAll("rect.function").data(function(t){return t.values?t.values:[]});i.enter().append("rect").on("mouseover",k.show).on("mouseout",k.hide).on("contextmenu",d3.contextMenu(function(t){var e=[];return t.docLink&&e.push({title:'<core-icon icon="help" self-center></core-icon>Documentation',action:function(t,e,n){console.log("Item #1 clicked!"),window.location.href=e.docLink}}),e})),i.attr("transform",function(t){return"translate("+f(t.startTime)+",0)"}).attr("class",function(t){var e="function";return t.endTime||(e+=" running"),t.status&&(e+=" status"+t.status),e}).attr("height",x.rangeBand()).attr("width",function(t){return D(t,f)}),i.exit().remove(),o.exit().remove();var u=y.selectAll(".bar").data(n,function(t){return t.key});u.enter().insert("g",":first-child").attr("class","bar"),u.attr("transform",function(t,e){var a=m/n.length;return"translate(0,"+e*a+")"});var p=u.selectAll("rect.function").data(function(t){return t.values?t.values:[]});p.enter().append("rect"),p.attr("transform",function(t){return"translate("+d(t.startTime)+",0)"}).attr("class",function(t){var e="function";return t.endTime||(e+=" running"),t.status&&(e+=" status"+t.status),e}).attr("height",m/n.length).attr("width",function(t){return D(t,d)}),u.exit().remove(),p.exit().remove()};A(n);var I=function(){var t=(new Date).getTime()-i[1].getTime();o[0]=new Date(o[0].getTime()+t),o[1]=new Date(o[1].getTime()+t),i[0]=new Date(i[0].getTime()+t),i[1]=new Date(i[1].getTime()+t),f.domain(o),d.domain(i),T.selectAll("rect.function").attr("transform",function(t){return"translate("+f(t.startTime)+",0)"}).attr("width",function(t){return D(t,f)}),y.selectAll("rect.function").attr("transform",function(t){return"translate("+d(t.startTime)+",0)"}).attr("width",function(t){return D(t,d)}),T.select(".x.axis.top").call(g.orient("top")),T.select(".x.axis.bottom").call(v.orient("bottom")),y.select(".x.axis.context.bottom").call(b.orient("bottom")),y.select(".x.brush").call(p.extent(o))},B=function(){l=parseInt(e.style("width"),10),l=l-c.left-c.right,f.range([0,l]),d.range([0,l]),d3.select(T.node().parentNode).style("width",l+c.left+c.right+"px"),T.selectAll("rect.background").attr("width",l),T.selectAll("rect.function").attr("transform",function(t){return"translate("+f(t.startTime)+",0)"}).attr("width",function(t){return D(t,f)}),y.selectAll("rect.function").attr("transform",function(t){return"translate("+d(t.startTime)+",0)"}).attr("width",function(t){return D(t,d)}),T.select(".x.axis.top").call(g.orient("top")),T.select(".x.axis.bottom").call(v.orient("bottom")),y.select(".x.axis.context.bottom").call(b.orient("bottom")),y.select(".x.brush").call(p.extent(o))};window.setInterval(function(){I()},1e3);return Object.freeze({resize:B,update:A})}t.timeline=e}(ea||(ea={}));